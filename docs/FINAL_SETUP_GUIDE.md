# ๐ฏ ูุธุงู ุชูุฒูุน ุงููุชุจ - ุฏููู ุงูุฅุนุฏุงุฏ ุงูููุงุฆู

## โ ุงูุญุงูุฉ ุงูุญุงููุฉ

ุชู ุจูุฌุงุญ ุชูุนูู ุชุณุฌูู ุงูุฏุฎูู ุจุงููุณุชุฎุฏููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช! ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู.

---

## ๐ ุฎุทูุงุช ุงูุจุฏุก ุงูุณุฑูุนุฉ

### 1๏ธโฃ **ุชุซุจูุช ุงููุชุทูุจุงุช**

```bash
cd book_distribution_system
pip install -r requirements.txt
```

### 2๏ธโฃ **ุชุดุบูู ุงููุฌุฑุงุช**

```bash
python manage.py migrate
```

### 3๏ธโฃ **ุฅูุดุงุก ุงููุณุชุฎุฏููู ุงูุงุฎุชุจุงุฑููู**

```bash
python manage.py create_test_users
```

### 4๏ธโฃ **ุชุดุบูู ุฎุงุฏู Django**

```bash
python manage.py runserver 0.0.0.0:8000
```

---

## ๐ฑ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

### ๐ ููุฏูุจ ุงูุชูุฒูุน (Driver)
```
Username: driver1
Password: driver123
Role: Courier
Governorate: Riyadh
```

```
Username: driver2
Password: driver456
Role: Courier
Governorate: Jeddah
```

### ๐ซ ููุธู ุงููุฏุฑุณุฉ (School Staff)
```
Username: sf1
Password: sf1password
Role: School Staff
School: ูุฏุฑุณุฉ ุงูููุถุฉ
```

```
Username: sf2
Password: sf2password
Role: School Staff
School: ูุฏุฑุณุฉ ุงูุชูุญูุฏ
```

---

## ๐งช ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ

### ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Python:

```bash
python test_database_login.py
```

### ุงุฎุชุจุงุฑ ุจุงุณุชุฎุฏุงู CURL:

```bash
# ุชุณุฌูู ุฏุฎูู ููุธู ูุฏุฑุณุฉ
curl -X POST http://localhost:8000/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{"username": "sf1", "password": "sf1password"}'

# ุชุณุฌูู ุฏุฎูู ููุฏูุจ
curl -X POST http://localhost:8000/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{"username": "driver1", "password": "driver123"}'
```

### ุงุฎุชุจุงุฑ ุจุงุณุชุฎุฏุงู Postman:

1. **URL**: `http://localhost:8000/api/auth/login/`
2. **Method**: POST
3. **Headers**: 
   - Content-Type: application/json
4. **Body** (JSON):
```json
{
  "username": "sf1",
  "password": "sf1password"
}
```

---

## ๐ ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ

```json
{
  "access": "eyJ0eXAiOiJKV1QiLCJhbGc...",
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc...",
  "user": {
    "id": 1,
    "username": "sf1",
    "full_name": "ููุธู ุงููุฏุฑุณุฉ 1",
    "role": "school_staff",
    "school_id": 1,
    "school_name": "ูุฏุฑุณุฉ ุงูููุถุฉ"
  }
}
```

---

## ๐ง ููุงุท ุงูุงุชุตุงู API

### ๐ ุงููุตุงุฏูุฉ

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|--------|--------|-------|
| POST | `/api/auth/login/` | ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู |
| POST | `/api/auth/refresh/` | ุชุฌุฏูุฏ ุงูุชููู |
| GET | `/api/users/me/` | ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ |

### ๐ ุงูููุงูุฌ ุงูุฏุฑุงุณูุฉ

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|--------|--------|-------|
| GET | `/api/grades/` | ูุงุฆูุฉ ุงูุตููู ุงูุฏุฑุงุณูุฉ |
| GET | `/api/grades/{id}/subjects/` | ููุงุฏ ุงูุตู ุงููุญุฏุฏ |

### ๐ฆ ุงูุดุญูุงุช

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู |
|--------|--------|-------|
| GET | `/api/shipments/` | ูุงุฆูุฉ ุงูุดุญูุงุช |
| POST | `/api/shipments/start_delivery/` | ุจุฏุก ุงูุชุณููู |
| POST | `/api/shipments/upload-photo/` | ุชุญููู ุตูุฑุฉ |
| POST | `/api/shipments/confirm_delivery/` | ุชุฃููุฏ ุงูุชุณููู |

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ุฎุทุฃ: "Cannot connect to Backend"

**ุงูุญู**: ุชุฃูุฏ ูู ุชุดุบูู ุฎุงุฏู Django:
```bash
python manage.py runserver 0.0.0.0:8000
```

### โ ุฎุทุฃ: "Invalid credentials"

**ุงูุญู**: ุชุฃูุฏ ูู ุฅูุดุงุก ุงููุณุชุฎุฏููู:
```bash
python manage.py create_test_users
```

### โ ุฎุทุฃ: "No such table"

**ุงูุญู**: ูู ุจุชุดุบูู ุงููุฌุฑุงุช:
```bash
python manage.py migrate
```

---

## ๐ฑ ุชุดุบูู ุชุทุจูู Flutter

1. **ุชุฃูุฏ ูู ุชุดุบูู ุฎุงุฏู Django** ุนูู `0.0.0.0:8000`

2. **ุดุบูู ุงูุชุทุจูู**:
```bash
cd ..  # ุฃุฑุฌุน ูููุดุฑูุน ุงูุฑุฆูุณู
flutter run
```

3. **ุณุฌูู ุงูุฏุฎูู** ุจุงุณุชุฎุฏุงู ุฃุญุฏ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุฃุนูุงู

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏุงูู ุงููุณุชุฎุฏููู

```
auth_user
โโโ id (PK)
โโโ username
โโโ password (ูุดูุฑุฉ)
โโโ email
โโโ is_active
โโโ first_name

distribution_courier
โโโ id (PK)
โโโ user_id (FK)
โโโ name
โโโ governorate_id
โโโ phone

distribution_schooluser
โโโ id (PK)
โโโ user_id (FK)
โโโ school_id
โโโ position

distribution_school
โโโ id (PK)
โโโ name
โโโ governorate_id
```

---

## ๐ ุงูุฃูุงู

โ **ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ** ุจุงุณุชุฎุฏุงู Django's built-in hashing

โ **JWT Tokens** ุจุตูุงุญูุฉ ูุญุฏูุฏุฉ:
- Access Token: 30 ููู
- Refresh Token: 90 ููู

โ **HTTPS ูู ุงูุฅูุชุงุฌ** (ุชุฃูุฏ ูู ุชููููู ูู ุฅุนุฏุงุฏุงุช Django)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงููุฑุญูุฉ ุงูุฃููู โ
- [x] ุฅุนุฏุงุฏ URL routing
- [x] ุชูุนูู JWT authentication
- [x] ุฅูุดุงุก management command
- [x] ูุชุงุจุฉ ุงูุชูุซูู

### ุงููุฑุญูุฉ ุงูุซุงููุฉ ๐
- [ ] ุงุฎุชุจุงุฑ API ุจุงุณุชุฎุฏุงู Postman
- [ ] ุงุฎุชุจุงุฑ ุชุทุจูู Flutter
- [ ] ุงูุชุญูู ูู ุงูุฃุฎุทุงุก

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ ๐
- [ ] ูุดุฑ ุนูู ุฎุงุฏู ุงูุฅูุชุงุฌ
- [ ] ุฅุนุฏุงุฏ HTTPS
- [ ] ุฅูุดุงุก ูุณุชุฎุฏููู ุญูููููู

---

## ๐ก ูุตุงุฆุญ ูููุฉ

1. **ุฃุซูุงุก ุงูุชุทููุฑ**: ุงุณุชุฎุฏู `python manage.py runserver` ูุน `--reload`

2. **ูุจู ุงูุฅูุชุงุฌ**: ูู ุจุชุบููุฑ `SECRET_KEY` ูู settings.py

3. **ููุชุทุจูู ุงููุญููู**: ุชุฃูุฏ ูู ุฃู ุนููุงู IP ููุฎุงุฏู ุตุญูุญ ูู ุงูููุฏ

4. **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ**: ูู ุจุนูู backup ููุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุชุธุงู

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. ุชุญูู ูู ููู `test_database_login.py`
2. ุฑุงุฌุน ุงูุฃุฎุทุงุก ูู ุณุฌู Django
3. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `book_system/settings.py`
4. ุชุญูู ูู ุงููุณุงุฑุงุช ูู `distribution/urls.py`

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 2025
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
**ุงูุฅุตุฏุงุฑ**: 1.0

